<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Gourmet Note</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            500: '#f97316', // Orange-500
                            600: '#ea580c', // Orange-600
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-brand-50 text-slate-700 font-sans pb-10">

    <header class="bg-brand-500 text-white shadow-lg sticky top-0 z-10">
        <div class="max-w-md mx-auto px-4 py-4 flex items-center justify-center">
            <h1 class="text-xl font-bold flex items-center gap-2">
                <i class="fa-solid fa-utensils"></i> My Gourmet Note
            </h1>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 mt-6">
        
        <div class="bg-white rounded-xl shadow-md p-5 mb-8 border border-brand-100">
            <h2 class="text-lg font-bold mb-4 text-brand-600 border-b pb-2 border-brand-100">お店を記録する</h2>
            
            <form id="shopForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-600 mb-1">店名</label>
                    <input type="text" id="shopName" required placeholder="例：美味しいカレー屋さん"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-1">ジャンル</label>
                        <select id="shopGenre" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500 bg-white">
                            <option value="和食">和食</option>
                            <option value="洋食">洋食</option>
                            <option value="中華">中華</option>
                            <option value="イタリアン">イタリアン</option>
                            <option value="フレンチ">フレンチ</option>
                            <option value="カフェ">カフェ</option>
                            <option value="ラーメン">ラーメン</option>
                            <option value="カレー">カレー</option>
                            <option value="焼肉">焼肉</option>
                            <option value="居酒屋">居酒屋</option>
                            <option value="その他">その他</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-1">評価</label>
                        <select id="shopRating" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500 bg-white">
                            <option value="5">★★★★★ (5)</option>
                            <option value="4">★★★★☆ (4)</option>
                            <option value="3">★★★☆☆ (3)</option>
                            <option value="2">★★☆☆☆ (2)</option>
                            <option value="1">★☆☆☆☆ (1)</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-slate-600 mb-1">一言メモ</label>
                    <textarea id="shopMemo" rows="2" placeholder="おすすめメニューや感想など"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition"></textarea>
                </div>

                <button type="submit" 
                    class="w-full bg-brand-500 hover:bg-brand-600 text-white font-bold py-3 rounded-lg shadow transition transform active:scale-95 flex items-center justify-center gap-2">
                    <i class="fa-solid fa-plus"></i> リストに追加
                </button>
            </form>
        </div>

        <h2 class="text-lg font-bold mb-3 text-slate-700 flex items-center gap-2">
            <i class="fa-solid fa-list text-brand-500"></i> 行ったお店リスト
        </h2>
        
        <div id="shopList" class="space-y-4 pb-20">
            <p class="text-center text-gray-400 py-10" id="emptyMessage">まだ記録がありません</p>
        </div>

    </main>

    <script>
        // DOM要素の取得
        const form = document.getElementById('shopForm');
        const shopList = document.getElementById('shopList');
        const emptyMessage = document.getElementById('emptyMessage');

        // ローカルストレージキー
        const STORAGE_KEY = 'myGourmetApp_v1';

        // 初期表示
        document.addEventListener('DOMContentLoaded', loadShops);

        // フォーム送信時の処理
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // 入力値の取得
            const name = document.getElementById('shopName').value;
            const genre = document.getElementById('shopGenre').value;
            const rating = document.getElementById('shopRating').value;
            const memo = document.getElementById('shopMemo').value;

            if (!name) return;

            // データオブジェクト作成
            const newShop = {
                id: Date.now(), // ユニークIDとして現在時刻を使用
                name,
                genre,
                rating,
                memo,
                date: new Date().toLocaleDateString('ja-JP')
            };

            // 保存処理
            saveShop(newShop);
            
            // フォームのリセット
            form.reset();
        });

        // データを保存する関数
        function saveShop(shop) {
            const shops = getShopsFromStorage();
            shops.unshift(shop); // 新しいものを先頭に
            localStorage.setItem(STORAGE_KEY, JSON.stringify(shops));
            renderList();
        }

        // データを削除する関数
        function deleteShop(id) {
            if(!confirm('この記録を削除してもよろしいですか？')) return;
            
            let shops = getShopsFromStorage();
            shops = shops.filter(shop => shop.id !== id);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(shops));
            renderList();
        }

        // ストレージからデータを取得する関数
        function getShopsFromStorage() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : [];
        }

        // リストを描画する関数
        function renderList() {
            const shops = getShopsFromStorage();
            
            shopList.innerHTML = ''; // リストをクリア

            if (shops.length === 0) {
                shopList.appendChild(emptyMessage);
                emptyMessage.style.display = 'block';
                return;
            } else {
                emptyMessage.style.display = 'none';
            }

            shops.forEach(shop => {
                // 星の表示生成
                const stars = '★'.repeat(shop.rating) + '☆'.repeat(5 - shop.rating);
                
                // カードHTML生成
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg shadow p-4 border-l-4 border-brand-500 relative animate-fade-in';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-1">
                        <div>
                            <span class="text-xs font-semibold text-brand-600 bg-brand-100 px-2 py-0.5 rounded-full mb-1 inline-block">
                                ${shop.genre}
                            </span>
                            <span class="text-xs text-gray-400 ml-2">${shop.date}</span>
                        </div>
                        <button onclick="deleteShop(${shop.id})" class="text-gray-300 hover:text-red-500 transition p-1">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>
                    
                    <h3 class="text-xl font-bold text-slate-800 mb-1">${shop.name}</h3>
                    
                    <div class="flex items-center mb-2">
                        <span class="text-yellow-400 text-sm tracking-widest mr-2">${stars}</span>
                        <span class="text-sm text-gray-500 font-bold">${shop.rating}.0</span>
                    </div>
                    
                    <p class="text-sm text-slate-600 bg-gray-50 p-2 rounded whitespace-pre-wrap">${shop.memo}</p>
                `;
                
                shopList.appendChild(card);
            });
        }

        // 初回読み込み用
        function loadShops() {
            renderList();
        }

        // 簡易的なアニメーション追加
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in {
                animation: fadeIn 0.3s ease-out;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
